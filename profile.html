<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Profile â€” Talent & Opportunity Discovery</title>
    <style>
      :root {
        --sky-500: #9ecae1;
        --sky-400: #add8e6;
        --sky-100: #eaf6fb;
        --ink-900: #0f1f2b;
        --ink-700: #2a3f52;
        --ink-500: #5a6c7b;
        --white: #ffffff;
        --shadow-sm: 0 6px 18px rgba(16, 30, 43, 0.08);
        --shadow-xs: 0 2px 10px rgba(16, 30, 43, 0.06);
        --radius-lg: 22px;
        --radius-md: 16px;
      }

      * { box-sizing: border-box; }

      body {
        margin: 0;
        font-family: "Inter", "SF Pro Text", "SF Pro Display", -apple-system,
          BlinkMacSystemFont, "Segoe UI", sans-serif;
        color: var(--ink-900);
        background: var(--white);
      }

      a { text-decoration: none; color: inherit; }
      img { max-width: 100%; display: block; }

      .page { min-height: 100vh; background: linear-gradient(180deg, #f7fcff 0%, #ffffff 42%, #f8fbfd 100%); }

      /* Topbar / Nav (copied to preserve behavior & styles) */
      .topbar { position: sticky; top: 0; z-index: 20; background: rgba(255,255,255,0.92); backdrop-filter: blur(14px); border-bottom: 1px solid rgba(16,30,43,0.06); }
      .nav { max-width: 1200px; margin: 0 auto; padding: 18px 24px; display:flex; align-items:center; justify-content:space-between; gap:16px; }
      .logo { display:flex; align-items:center; gap:12px; font-weight:600; font-size:1.3rem; }
      .logo-img { width:60px; height:60px; border-radius:50%; box-shadow:var(--shadow-xs); object-fit:cover; }
      .menu { display:flex; align-items:center; gap:20px; color:var(--ink-700); font-size:0.95rem; }
      .menu a { display:inline-flex; align-items:center; justify-content:center; min-height:40px; padding:0 14px; border-radius:999px; transition:background .2s ease, color .2s ease; }
      .menu a:hover { background:var(--sky-100); color:var(--ink-900); }
      .nav-actions { display:flex; align-items:center; gap:14px; }
      .icon-btn { width:40px; height:40px; border-radius:50%; border:1px solid rgba(16,30,43,0.08); display:grid; place-items:center; background:var(--white); box-shadow:var(--shadow-xs); position:relative; }
      .icon-dot { width:10px; height:10px; border-radius:50%; background:var(--sky-500); position:absolute; top:11px; right:11px; }
      .notification-wrap { position:relative; }
      .notification-panel { position:absolute; top:calc(100% + 10px); right:0; width:min(92vw,340px); padding:14px; border-radius:var(--radius-md); background:var(--white); box-shadow:var(--shadow-sm); border:1px solid rgba(16,30,43,0.08); display:none; z-index:40; }
      .notification-panel.open { display:block; }
      .notification-head { margin:0 0 10px; font-size:0.95rem; }
      .notification-item { padding:10px; border-radius:12px; background:var(--sky-100); margin-bottom:8px; }
      .notification-item p { margin:0; color:var(--ink-700); font-size:0.9rem; line-height:1.45; }
      .notification-actions { margin-top:8px; display:flex; gap:8px; }
      .notif-btn { border:none; border-radius:999px; padding:6px 12px; font-size:0.82rem; cursor:pointer; background:linear-gradient(135deg,var(--sky-500),var(--sky-400)); color:var(--white); }
      .notif-btn.secondary { background:var(--white); color:var(--ink-700); border:1px solid rgba(16,30,43,0.1); }
      .login-btn { height:40px; padding:0 18px; display:inline-flex; align-items:center; justify-content:center; border-radius:999px; border:none; background:var(--sky-500); color:var(--white); font-weight:600; box-shadow:var(--shadow-sm); cursor:pointer; }

      .profile {
        width: 40px;
        height: 40px;
        border-radius: 50%;
        border: 1px solid rgba(16, 30, 43, 0.08);
        display: grid;
        place-items: center;
        background: var(--white);
        box-shadow: var(--shadow-xs);
      }

      /* Page content */
      main { padding: 40px 24px; }
      .section { max-width:1200px; margin:0 auto; }

      /* Profile card (use existing tokens for consistency) */
      .profile-card { background:var(--white); border-radius:var(--radius-lg); padding:28px; box-shadow:var(--shadow-sm); display:flex; gap:28px; align-items:flex-start; }
      .profile-avatar { width:120px; height:120px; border-radius:50%; object-fit:cover; box-shadow:var(--shadow-xs); border:4px solid rgba(158,202,225,0.18); cursor:pointer; }
      .profile-grid { display:flex; gap:24px; align-items:flex-start; }
      .profile-details { flex:1; display:flex; flex-direction:column; gap:12px; }
      .meta { color:var(--ink-500); font-size:0.95rem; }
      .id { color:var(--ink-700); font-weight:600; }
      .skills-wrap { display:flex; flex-direction:column; gap:10px; margin-top:8px; }
      .skills-list { display:flex; gap:8px; flex-wrap:wrap; }
      .skill-pill { display:inline-flex; align-items:center; gap:8px; font-size:0.85rem; padding:6px 12px; border-radius:999px; background:var(--sky-100); color:var(--ink-700); }
      .points { display:inline-flex; align-items:baseline; gap:10px; margin-top:6px; }
      .points .value { font-size:1.8rem; font-weight:700; color:var(--ink-900); }
      .points .label { color:var(--ink-500); font-size:0.95rem; }
      .card-actions { display:flex; gap:10px; margin-top:16px; }
      .hidden { display:none; }
      .text-input { padding:10px 12px; border-radius:12px; border:1px solid rgba(16,30,43,0.08); font-size:1rem; width:100%; }
      .edit-skill-input { padding:8px 10px; border-radius:8px; border:1px dashed rgba(16,30,43,0.08); min-width:160px; }
      .edit-skill-tag { background:var(--sky-100); padding:6px 10px; border-radius:999px; display:inline-flex; gap:8px; align-items:center; }
      @media (max-width:980px) { .profile-card { flex-direction:column; align-items:center; text-align:center; } .profile-details { align-items:center; } }
    </style>
  </head>
  <body>
    <div class="page">
      <header class="topbar">
        <div class="nav">
          <div class="logo">
            <img class="logo-img" src="logo.png" alt="Talent Search logo" />
            Talent Search
          </div>
          <nav class="menu">
            <a href="index (1).html">Home</a>
            <a href="initiatives.html">Initiatives</a>
            <a href="workshops.html">Workshops</a>
            <a href="events.html">Events</a>
            <a href="#">About Us</a>
          </nav>
          <div class="nav-actions">
            <div class="notification-wrap">
              <button class="icon-btn notification-toggle" aria-label="Notifications" aria-haspopup="true" aria-expanded="false">
                <span class="icon-dot"></span>
                <span>ðŸ””</span>
              </button>
              <div class="notification-panel" role="menu" aria-label="Notifications">
                <h3 class="notification-head">Notifications</h3>
                <div class="notification-item">
                  <p>Interest matched: "Campus Sustainability Sprint". Do you want to enroll?</p>
                  <div class="notification-actions">
                    <button class="notif-btn">Enroll</button>
                    <button class="notif-btn secondary">Later</button>
                  </div>
                </div>
                <div class="notification-item">
                  <p>You have a new workshop recommendation based on your recent activity.</p>
                </div>
                <div class="notification-item">
                  <p>Reminder: Foundation Day event registration closes tomorrow.</p>
                </div>
              </div>
            </div>
            <div class="profile" aria-label="Profile">ðŸ‘¤</div>
          </div>
        </div>
      </header>

      <main>
        <section class="section">
          <div class="profile-card" id="profileCard">
            <div class="profile-grid">
              <div>
                <img id="profileAvatar" class="profile-avatar" src="profilepic.jpg" alt="Profile avatar" title="Click to change" />
                <input id="imageInput" type="file" accept="image/*" class="hidden" />
              </div>

              <div class="profile-details">
                <div>
                  <h2 id="viewName">Rushil Gargash</h2>
                  <input id="inputName" class="text-input hidden" />
                  <div class="meta" id="viewInstitution">Plaksha University</div>
                  <input id="inputInstitution" class="text-input hidden" />
                  <div class="meta">ID: <span id="viewId" class="id">U20240161</span></div>
                  <input id="inputId" class="text-input hidden" />
                </div>

                <div class="skills-wrap">
                  <div style="display:flex; align-items:center; gap:10px;">
                    <strong>Skills</strong>
                    <button id="editSkillsBtn" class="notif-btn secondary" style="padding:6px 10px;">Edit Skills</button>
                  </div>
                  <div class="skills-list" id="viewSkills">
                    <span class="skill-pill">Python</span>
                    <span class="skill-pill">UX Design</span>
                    <span class="skill-pill">Data Viz</span>
                  </div>

                  <div id="editSkillsArea" class="hidden">
                    <div id="editSkillsList" style="display:flex; gap:8px; flex-wrap:wrap;"></div>
                    <div style="margin-top:8px; display:flex; gap:8px; align-items:center;">
                      <input id="skillInput" class="edit-skill-input" placeholder="Add a skill and press Enter" />
                    </div>
                  </div>
                </div>

                <div class="points">
                  <div>
                    <div class="label">Points Accumulated</div>
                    <div class="value" id="pointsValue">1,420</div>
                  </div>
                </div>

                <div class="card-actions">
                  <button id="editBtn" class="primary-btn">Edit Profile</button>
                  <button id="saveBtn" class="primary-btn hidden">Save</button>
                  <button id="cancelBtn" class="notif-btn secondary hidden">Cancel</button>
                </div>
              </div>
            </div>
          </div>
        </section>
      </main>

      <div style="height:40px;"></div>
    </div>

    <script>
      (function(){
        // notification dropdown behavior (same as index)
        document.querySelectorAll('.notification-wrap').forEach(function(wrap){
          var toggle = wrap.querySelector('.notification-toggle');
          var panel = wrap.querySelector('.notification-panel');
          if(!toggle || !panel) return;
          toggle.addEventListener('click', function(e){ e.stopPropagation(); var isOpen = panel.classList.toggle('open'); toggle.setAttribute('aria-expanded', isOpen ? 'true' : 'false'); });
          panel.addEventListener('click', function(e){ e.stopPropagation(); });
          document.addEventListener('click', function(){ panel.classList.remove('open'); toggle.setAttribute('aria-expanded','false'); });
          document.addEventListener('keydown', function(event){ if(event.key === 'Escape'){ panel.classList.remove('open'); toggle.setAttribute('aria-expanded','false'); } });
        });

        // Profile edit UI
        var editBtn = document.getElementById('editBtn');
        var saveBtn = document.getElementById('saveBtn');
        var cancelBtn = document.getElementById('cancelBtn');
        var editSkillsBtn = document.getElementById('editSkillsBtn');

        var viewName = document.getElementById('viewName');
        var inputName = document.getElementById('inputName');
        var viewInstitution = document.getElementById('viewInstitution');
        var inputInstitution = document.getElementById('inputInstitution');
        var viewId = document.getElementById('viewId');
        var inputId = document.getElementById('inputId');

        var viewSkills = document.getElementById('viewSkills');
        var editSkillsArea = document.getElementById('editSkillsArea');
        var editSkillsList = document.getElementById('editSkillsList');
        var skillInput = document.getElementById('skillInput');

        var profileAvatar = document.getElementById('profileAvatar');
        var imageInput = document.getElementById('imageInput');

        var originalData = {};

        function enterEditMode(){
          // store original
          originalData.name = viewName.textContent.trim();
          originalData.institution = viewInstitution.textContent.trim();
          originalData.id = viewId.textContent.trim();
          originalData.skills = Array.from(viewSkills.querySelectorAll('.skill-pill')).map(function(s){ return s.textContent.trim(); });
          originalData.avatar = profileAvatar.src;

          // show inputs
          viewName.classList.add('hidden'); inputName.classList.remove('hidden'); inputName.value = originalData.name;
          viewInstitution.classList.add('hidden'); inputInstitution.classList.remove('hidden'); inputInstitution.value = originalData.institution;
          viewId.parentElement.classList.add('hidden'); inputId.classList.remove('hidden'); inputId.value = originalData.id;

          // skills
          viewSkills.classList.add('hidden'); editSkillsArea.classList.remove('hidden');
          renderEditSkills(originalData.skills);

          editBtn.classList.add('hidden'); saveBtn.classList.remove('hidden'); cancelBtn.classList.remove('hidden');
        }

        function exitEditMode(save){
          if(save){
            // write values back
            viewName.textContent = inputName.value.trim() || 'â€”';
            viewInstitution.textContent = inputInstitution.value.trim() || 'â€”';
            viewId.textContent = inputId.value.trim() || 'â€”';
            // skills
            var skills = Array.from(editSkillsList.querySelectorAll('.edit-skill-tag')).map(function(t){ return t.dataset.value; });
            viewSkills.innerHTML = '';
            skills.forEach(function(s){ var sp = document.createElement('span'); sp.className = 'skill-pill'; sp.textContent = s; viewSkills.appendChild(sp); });
          } else {
            // revert
            viewName.textContent = originalData.name;
            viewInstitution.textContent = originalData.institution;
            viewId.textContent = originalData.id;
            profileAvatar.src = originalData.avatar;
            viewSkills.innerHTML = '';
            originalData.skills.forEach(function(s){ var sp = document.createElement('span'); sp.className = 'skill-pill'; sp.textContent = s; viewSkills.appendChild(sp); });
          }

          // toggle visibility back
          viewName.classList.remove('hidden'); inputName.classList.add('hidden');
          viewInstitution.classList.remove('hidden'); inputInstitution.classList.add('hidden');
          viewId.parentElement.classList.remove('hidden'); inputId.classList.add('hidden');
          viewSkills.classList.remove('hidden'); editSkillsArea.classList.add('hidden');

          editBtn.classList.remove('hidden'); saveBtn.classList.add('hidden'); cancelBtn.classList.add('hidden');
        }

        function renderEditSkills(list){
          editSkillsList.innerHTML = '';
          list.forEach(function(s){
            var tag = document.createElement('div'); tag.className = 'edit-skill-tag'; tag.dataset.value = s; tag.textContent = s;
            var rem = document.createElement('button'); rem.type = 'button'; rem.textContent = 'âœ•'; rem.style.border='none'; rem.style.background='transparent'; rem.style.cursor='pointer'; rem.style.marginLeft='8px';
            rem.addEventListener('click', function(){ tag.remove(); });
            tag.appendChild(rem);
            editSkillsList.appendChild(tag);
          });
        }

        // add skill on Enter
        skillInput.addEventListener('keydown', function(e){ if(e.key === 'Enter'){ e.preventDefault(); var val = skillInput.value.trim(); if(!val) return; var tag = document.createElement('div'); tag.className='edit-skill-tag'; tag.dataset.value = val; tag.textContent = val; var rem = document.createElement('button'); rem.type='button'; rem.textContent='âœ•'; rem.style.border='none'; rem.style.background='transparent'; rem.style.cursor='pointer'; rem.style.marginLeft='8px'; rem.addEventListener('click', function(){ tag.remove(); }); tag.appendChild(rem); editSkillsList.appendChild(tag); skillInput.value=''; } });

        // avatar change
        profileAvatar.addEventListener('click', function(){ if(saveBtn.classList.contains('hidden')) return; imageInput.click(); });
        imageInput.addEventListener('change', function(e){ var file = e.target.files && e.target.files[0]; if(!file) return; var reader = new FileReader(); reader.onload = function(ev){ profileAvatar.src = ev.target.result; }; reader.readAsDataURL(file); });

        editBtn.addEventListener('click', enterEditMode);
        editSkillsBtn.addEventListener('click', function(){ if(editSkillsArea.classList.contains('hidden')){ editSkillsArea.classList.remove('hidden'); viewSkills.classList.add('hidden'); } else { editSkillsArea.classList.add('hidden'); viewSkills.classList.remove('hidden'); } });
        saveBtn.addEventListener('click', function(){ exitEditMode(true); });
        cancelBtn.addEventListener('click', function(){ exitEditMode(false); });

      })();
    </script>
  </body>
</html>
